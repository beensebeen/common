<template>
    <template if:true={accountList}>
        <div class="container">
            <h2 class="table-title">ë‚˜ì˜ íšŒì› ì •ë³´</h2>
            <p class="member-count">ì´ íšŒì› {accountList.length}ëª…</p>

            <div class="table-wrapper">
                <div class="table-header">
                    <span class="col name">ğŸ§‘â€ğŸ¤â€ğŸ§‘ ì´ë¦„</span>
                    <span class="col phone">ğŸ“ ì—°ë½ì²˜</span>
                    <span class="col address">ğŸ¡ ì£¼ì†Œ</span>
                    <span class="col child">ğŸ‘¶ ìë…€</span>
                </div>

                <template for:each={accountList} for:item="wrapper">
                    <div key={wrapper.account.Id} class="table-row clickable" data-id={wrapper.account.Id}
                        onclick={handleAccountClick}>
                        <span class="col name">{wrapper.account.Name}</span>
                        <span class="col phone">{wrapper.account.Phone}</span>
                        <span class="col address">
                            {wrapper.account.CityName__c} {wrapper.account.State__c} {wrapper.account.Street__c}
                        </span>
                        <span class="col child">
                            <template if:true={wrapper.children}>
                                <template for:each={wrapper.children} for:item="child">
                                    <div key={child.Id} class="child-name-link" data-id={child.Id}
                                        onclick={handleChildClick}>
                                        {child.ChildName__c}
                                    </div>
                                </template>
                            </template>
                            <template if:false={wrapper.children}>
                                -
                            </template>
                        </span>
                    </div>
                </template>
            </div>
        </div>
    </template>

    <template if:true={error}>
        <p class="error">â— ë°ì´í„°ë¥¼ ë¶ˆëŸ¬ì˜¤ëŠ” ë° ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.</p>
    </template>
</template>